/**
 * @param {TemplateStringsArray} strings
 * @returns {{bytes: Uint8Array; count: number}}
 */
function cs({ raw: [input] }) {
  let inRow = false;
  let y = -1;
  let x = -1;

  /** @type {number[]} */
  const bytes = [];
  let count = 0
  for (const char of input) {
    if (char === '|') {
      if (inRow) {
        inRow = false;
        x = -1;
      } else {
        inRow = true;
        y += 1;
      }
      continue;
    }

    if (!inRow) {
      continue;
    }

    x += 1;
    if (char === 'O') {
      bytes.push((x >> 8) & 0xff);
      bytes.push(x & 0xff);
      bytes.push((y >> 8) & 0xff);
      bytes.push(y & 0xff);
      count++;
    }
  }

  return { bytes: new Uint8Array(bytes), count };
}

export const Patterns = /** @type {const} */ ({
  '119P4H1V0': {
    name: '119P4H1V0',
    coordinates: cs`
      |.................................O.|
      |................O...............O.O|
      |......O.O......O.....OO........O...|
      |......O....O....O.OOOOOO....OO.....|
      |......O.OOOOOOOO..........O..O.OOO.|
      |.........O.....O.......OOOO....OOO.|
      |....OO.................OOO.O.......|
      |.O..OO.......OO........OO..........|
      |.O..O..............................|
      |O..................................|
      |.O..O..............................|
      |.O..OO.......OO........OO..........|
      |....OO.................OOO.O.......|
      |.........O.....O.......OOOO....OOO.|
      |......O.OOOOOOOO..........O..O.OOO.|
      |......O....O....O.OOOOOO....OO.....|
      |......O.O......O.....OO........O...|
      |................O...............O.O|
      |.................................O.|
    `
  },
  '295P5H1V1': {
    name: '295P5H1V1',
    coordinates: cs`
      |.............OO.....................................|
      |.....OO....OO.O.O...................................|
      |....OOO....OOOO.....................................|
      |...OO......OO.....O.................................|
      |..OO..OO...O..O..O..................................|
      |.OO.....O.......O..OO...............................|
      |.OO.O...OOOO........................................|
      |....O...OO..OO.O....................................|
      |.....OOO....O.O.....................................|
      |......OO...OO..O....................................|
      |......O.....O.......................................|
      |.OOOO.O..O..O...O...................................|
      |.OOO...OOOOO..OOOOOOO.O.............................|
      |O.O....O..........O..OO.............................|
      |OOO.O...O...O.....OOO...............................|
      |.......O.O..O.......OO..............................|
      |.O...O.....OO........OO..O.O........................|
      |....O.......O........OOO.O.OOO......................|
      |...O........OOO......O....O.........................|
      |.....O......O.O.....O.O.............................|
      |.....O......O.OO...O....O...........................|
      |.............O.OOOO...O.....O..O....................|
      |............OO..OO.O.O...O.OOO......................|
      |.................O......O..OOO...OOO................|
      |....................O..O......OO....................|
      |................OO....O..O..........OO..............|
      |..................O.............O...O...............|
      |................OO....OO........O...................|
      |.................O...OOO........O.O.O.O.............|
      |.................O....OO........O.....OO............|
      |........................O........O..OOO.............|
      |.....................O..O........O........O.........|
      |..........................OOOO........OO...O........|
      |.......................O......OO......OO...O........|
      |.......................O....O............O..........|
      |.......................O...............O............|
      |.........................OO.O.O.......O..O..........|
      |.........................O....O.........OOO.........|
      |............................OOO.OO..O...O...O.OO....|
      |.............................O..OO.O.....O...O..O...|
      |.....................................OO..O...O......|
      |..................................O.OO.OO.O..OO...O.|
      |...............................O.....O...O.......O.O|
      |................................OO............OO...O|
      |......................................O.......OO....|
      |.......................................OOO...OO..O..|
      |......................................O..O.OOO......|
      |......................................O....OO.......|
      |.......................................O............|
      |..........................................O..O......|
      |.........................................O..........|
      |..........................................OO........|
    `
  },
  '2c3-wire': {
    name: '2c/3 Wire',
    coordinates: cs`
      |......O..O.......................................|
      |....OOOOOO.......................................|
      |...O.............................................|
      |...O..OOOOOO.....................................|
      |OO.O.O.O....O....................................|
      |OO.O.O.OOOOOO....................................|
      |....OO.O.......O.................................|
      |.......O..OOOOOO.................................|
      |.......O.O.......................................|
      |......OO.O..OOOOOO...............................|
      |.........O.O......O..............................|
      |.........O.O..OOOOO..............................|
      |..........OO.O.......O...........................|
      |.............O..OOOOOO...........................|
      |.............O.O.................................|
      |............OO.O..OOOOOO.........................|
      |...............O.O......O........................|
      |...............O.O..OOOOO........................|
      |................OO.O.......O.....................|
      |...................O..OOOOOO.....................|
      |...................O.O...........................|
      |..................OO.O..OOOOOO...................|
      |.....................O.O......O..................|
      |.....................O.O..OOOOO..................|
      |......................OO.O.......O...............|
      |.........................O..OOOOOO...............|
      |.........................O.O.....................|
      |........................OO.O..OOOOOO.............|
      |...........................O.O......O............|
      |...........................O.O..OOOOO............|
      |............................OO.O.......O.........|
      |...............................O..OOOOOO.........|
      |...............................O.O...............|
      |..............................OO.O..OOOOOO.......|
      |.................................O.O......O......|
      |.................................O.O..OOOOO......|
      |..................................OO.O.......O...|
      |.....................................O..OOOOOO...|
      |.....................................O.O.........|
      |....................................OO.O..OOOOOO.|
      |.......................................O.O......O|
      |.......................................O.O..OOO.O|
      |........................................OO.O...O.|
      |...........................................O..O..|
      |...........................................O.O...|
      |..........................................OO.O.O.|
      |..............................................OO.|
    `
  },
  '4-boats': {
    name: '4 Boats',
    coordinates: cs`
      |...O....|
      |..O.O...|
      |.O.OO...|
      |O.O..OO.|
      |.OO..O.O|
      |...OO.O.|
      |...O.O..|
      |....O...|
    `
  },
  '44P5H2V0': {
    name: '44P5H2V0',
    coordinates: cs`
      |....O.....O....|
      |...OOO...OOO...|
      |..O..O...O..O..|
      |.OOO.......OOO.|
      |..O.O.....O.O..|
      |....OO...OO....|
      |O....O...O....O|
      |.....O...O.....|
      |OO...O...O...OO|
      |..O..O...O..O..|
      |....O.....O....|
    `
  },
  'acorn': {
    name: 'Acorn',
    coordinates: cs`
      |.O.....|
      |...O...|
      |OO..OOO| 
    `
  },
  'arm': {
    name: 'Arm',
    coordinates: cs`
      |............OOO............|
      |...........O...............|
      |..........OO...............|
      |....O.OO..OO..OOO..........|
      |...OO.OO.OO.....O....OO....|
      |..O..OO...O.OO....OO.OO....|
      |........OOOO......OO...O...|
      |....O.O.OO........OO.......|
      |......O....................|
      |...OO......................|
      |..OO..O....................|
      |....OOO.OO.................|
      |O..O.....OOO...............|
      |.O.OOOO.O...O..............|
      |........OO....O......O.....|
      |.........O....OO....OO.OOO.|
      |........O...O..OO..OO.....O|
      |..........O..O.O..O.....OO.|
      |...........O.OOO....O......|
      |............OOO..OOO.O.....|
      |...........OO...OOO........|
      |..................O..O.....|
      |...................O.......|
    `
  },
  'baker': {
    name: 'Baker',
    coordinates: cs`
      |..............OO|
      |.............O.O|
      |............O...|
      |...........O....|
      |..........O.....|
      |.........O......|
      |........O.......|
      |.......O........|
      |......O.........|
      |.....O..........|
      |....O...........|
      |...O............|
      |OOO.............|
      |.O..............|
    `
  },
  'biclock': {
    name: 'Biclock',
    coordinates: cs`
      |..O....|
      |OO.....|
      |..OO...|
      |.O...O.|
      |...OO..|
      |.....OO|
      |....O..|
    `
  },
  'bi-gun': {
    name: 'Bi-Gun',
    coordinates: cs`
      |...........O......................................|
      |..........OO......................................|
      |.........OO.......................................|
      |..........OO..OO..................................|
      |......................................O...........|
      |......................................OO........OO|
      |.......................................OO.......OO|
      |..........OO..OO..................OO..OO..........|
      |OO.......OO.......................................|
      |OO........OO......................................|
      |...........O......................................|
      |..................................OO..OO..........|
      |.......................................OO.........|
      |......................................OO..........|
      |......................................O...........|
    `
  },
  'blinker-puffer': {
    name: 'Blinker Puffer',
    coordinates: cs`
      |...O.....|
      |.O...O...|
      |O........|
      |O....O...|
      |OOOOO....|
      |.........|
      |.........|
      |.........|
      |.OO......|
      |OO.OOO...|
      |.OOOO....|
      |..OO.....|
      |.........|
      |.....OO..|
      |...O....O|
      |..O......|
      |..O.....O|
      |..OOOOOO.|
    `
  },
  'copperhead': {
    name: 'Copperhead',
    coordinates: cs`
      |..OOOO..|
      |........|
      |..O..O..|
      |.O.OO.O.|
      |.O....O.|
      |........|
      |.O....O.|
      |.OO..OO.|
      |.OOOOOO.|
      |..O..O..|
      |...OO...|
      |...OO...|
    `
  },
  'demultiplexer': {
    name: 'Demultiplexer',
    coordinates: cs`
      |...........................O.....|
      |........OO.................O.O...|
      |.........O.................OO....|
      |.........O.O.....................|
      |..........OO.....................|
      |.......................OO........|
      |.......................O.O.......|
      |........................O........|
      |.................................|
      |.................................|
      |.............................OO..|
      |..........O..................O.O.|
      |..........O.O..................O.|
      |..........OOO............OO....OO|
      |............O............O.O.....|
      |...........................O.....|
      |...........................OO....|
      |.................................|
      |.................................|
      |..OO.............................|
      |.O.O.............................|
      |.O...............................|
      |OO...............................|
    `
  },
  'glider': {
    name: 'Glider',
    coordinates: cs`
      |..O|
      |O.O|
      |.OO|
    `
  },
  'gosper-glider-gun': {
    name: 'Gosper Glider Gun',
    coordinates: cs`
      |........................O...........|
      |......................O.O...........|
      |............OO......OO............OO|
      |...........O...O....OO............OO|
      |OO........O.....O...OO..............|
      |OO........O...O.OO....O.O...........|
      |..........O.....O.......O...........|
      |...........O...O....................|
      |............OO......................|
    `
  },
  'heavy-weight-spaceship': {
    name: 'Heavy Weight Spaceship',
    coordinates: cs`
      |..OO...|
      |O....O.|
      |......O|
      |O.....O|
      |.OOOOOO|
    `
  },
  'light-weight-spaceship': {
    name: 'Light Weight Spaceship',
    coordinates: cs`
      |.OOOO|
      |O...O|
      |....O|
      |O..O.| 
    `
  },
  'middle-weight-spaceship': {
    name: 'Middle Weight Spaceship',
    coordinates: cs`
      |..O...|
      |O...O.|
      |.....O|
      |O....O|
      |.OOOOO|
    `
  },
  'noahs-ark': {
    name: 'Noah\'s Ark',
    coordinates: cs`
      |..........O.O..|
      |.........O.....|
      |..........O..O.|
      |............OOO|
      |...............|
      |...............|
      |...............|
      |...............|
      |...............|
      |.O.............|
      |O.O............|
      |...............|
      |O..O...........|
      |..OO...........|
      |...O...........|
    `
  },
  'pentadecathlon': {
    name: 'Pentadecathlon',
    coordinates: cs`
      |..O....O..|
      |OO.OOOO.OO|
      |..O....O..|
    `
  },
  'pi-heptomino': {
    name: 'pi-Heptomino',
    coordinates: cs`
      |OOO|
      |O.O|
      |O.O|
    `
  },
  'queen-bee-shuttle': {
    name: 'Queen Bee Shuttle',
    coordinates: cs`
      |.........O............|
      |.......O.O............|
      |......O.O.............|
      |OO...O..O.............|
      |OO....O.O.............|
      |.......O.O........OO..|
      |.........O........O.O.|
      |....................O.|
      |....................OO|
    `
  },
  'r-pentomino': {
    name: 'r-Pentomino',
    coordinates: cs`
      |.OO|
      |OO.|
      |.O.|
    `
  },
  'switch-engine': {
    name: 'Switch Engine',
    coordinates: cs`
      |.O.O..|
      |O.....|
      |.O..O.|
      |...OOO|
    `
  }
});

/** 
 * @typedef {keyof typeof Patterns} PatternType
 * @typedef {typeof Patterns[PatternType]} Pattern
 */
